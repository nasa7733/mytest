# Define the Dockerhub credentials as variables $dockerhub_username = 'your_dockerhub_username' $dockerhub_password = 'your_dockerhub_password' # Consider using Hiera or other secure methods for sensitive data # Install Docker package { 'docker': ensure => 'installed', provider => 'docker', } # Build and push frontend Docker image exec { 'build-frontend': command => "docker build -t ${dockerhub_username}/frontend-image -f Dockerfile_frontend .", } exec { 'login-dockerhub': command => "docker login -u ${dockerhub_username} -p ${dockerhub_password}", require => Exec['build-frontend'], } exec { 'push-frontend': command => "docker push ${dockerhub_username}/frontend-image", require => Exec['login-dockerhub'], } # Build and push backend Docker image exec { 'build-backend': command => "docker build -t ${dockerhub_username}/backend-image -f Dockerfile_backend .", } exec { 'push-backend': command => "docker push ${dockerhub_username}/backend-image", require => Exec['build-backend'], }
